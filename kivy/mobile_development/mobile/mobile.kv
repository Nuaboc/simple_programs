#:kivy 2.0.0

#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import FadeTransition kivy.uix.screenmanager.NoTransition

# Root is the root widget (a child class from Screen Manager)
Root:
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    transition: FadeTransition()
    OpeningScreen:
    MainScreen:
    SettingsScreen:


<OpeningScreen>:
    name: 'opening'
    # Setting the screen as a FloatLayout allows to set each child widget in a relative position.
    FloatLayout
        # Create a text 'widget' to be rendered.
        Label:
            text: 'Super App!'
            font_size: 70
            color: 0, 0, 0, 1
            pos_hint: {'top': 1.25}
        Label:
            text: 'Daily tip!!!'
            font_size: 20
            color: 0, 0, 0, 1
            pos_hint: {'top': 1}
        Label:
            text: 'Tap anywhere to continue'
            color: 0, 0, 0, .5
            pos_hint: {'bottom': 2}
            pos_hint: {'top': .75}
        Button:
            # set the background transparent
            background_color: 0, 0, 0, 0
            # Set the button size same as screen so wherever the user tap or click set the on_press binding
            size_hint: root.size
            pos: root.pos
            # Tells the ScreenManager to change the current screen to 'main'
            on_release: app.root.current = 'main'


<Label>
    font_size: 25
    color: 0, 0, 0, 1


<MainScreen>:
    name: 'main'
    test_var2: test_var2

    FloatLayout:
        Label:
            pos_hint: {'top': 1.40}
            text: 'Main Screen!'
            font_size: 30
            color: 0, 0, 0, 1
        Button:
            # Make the background of the button invisible
            background_color: 0, 0, 0, 0
            size_hint: None, None
            size: 25, 25
            pos_hint: {'top': .925, 'right': .925}
            text: ':'
            # make the text visible
            color: 0, 0, 0, 1
            font_size: 30
            on_release: app.root.current = 'settings'

        BoxLayout:
            orientation: 'vertical'
            pos_hint: {'top': .75}
            size_hint: 1, None

            GridLayout:
                row_force_default: True
                # Set the row height to 100 px
                row_default_height: 100
                cols: 6
                size_hint: 1, None
                canvas:
                    Color:
                        rgba: .5, .5, .5, .4
                    Rectangle:
                        size: self.size
                        pos: self.pos
                # Column titles
                Label:
                    text: 'Z'
                    background_color: 1, 0, 1
                Label:
                    text: 'A'

                Label:
                    text: 'B'
                Label:
                    text: 'C'
                Label:
                    text: 'D'
                Label:
                    text: 'E'

            # Here a gridlayout representing a table
            GridLayout:
                #pos_hint: {'top': .75}
                size_hint: 1, None
                cols: 6
                #padding: 0
                #spacing: 100
                row_force_default: True
                # Set the row height to 100 px
                row_default_height: 100
                canvas:
                    Color:
                        rgba: .5, .5, .5, .25
                    # Make a rectangle to render the canvas color
                    Rectangle:
                        size: self.size
                        pos: self.pos
                # The 'slot1' is an input 'box'
                TextInput:
                    # Set the input text box background to transparent
                    background_color: 0, 0, 0, 0
                    font_size: 25
                    pos_hint: None, None
                    pos: 80, 80
                    id: test_var2
                    multiline: False
                    on_text_validate: root.press()
                Label:
                    text: 'slot2'
                Label:
                    text: 'slot3'
                Label:
                    text: 'slot4'
                Label:
                    text: 'slot5'
                Label:
                    text: 'slot6'
                Label:
                    id: test_var
                Label:
                    text: root.test_var
                Label:
                    id: root.test_var2


<ColourScreen>:
    name: 'color'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'colour {:.2},{:.2},{:.2} screen'.format(*root.colour[:3])
            font_size: 30
            color: 0, 0, 0, 1
        Widget:
            canvas:
                Color:
                    rgba: root.colour
                Ellipse:
                    pos: self.pos
                    size: self.size
        BoxLayout:
            orientation: 'vertical'
            Button:
                text: 'go to main screen'
                font_size: 30
                on_release: app.root.current = 'main'
            Button:
                text: 'get random colour screen'
                font_size: 30
                on_release: app.root.new_colour_screen()


<SettingsScreen>:
    name: 'settings'
    FloatLayout:
        Widget:
            # Set up the background as a full window red rectangle
            canvas:
                Color:
                    rgba: 1, 0, 0, 1
                Rectangle:
                    size: root.size
        Label:
            text: 'Settings'
            font_size: 30
            color: 0, 0, 0, 1
            pos_hint: {'top': 1.4}
        BoxLayout:
            # Set the background of the boxlayout for the button blue with opacity at 20%
            canvas:
                Color:
                    rgba: 1, 1, 1, .2
                Rectangle:
                    size: self.size
                    pos: self.pos
            orientation: 'vertical'
            padding: 15
            pos_hint: {'center_y': .5, 'center_x': .5}
            #pos: self.pos
            size_hint: .5, .3
            #size: self.size
            Button:
                pos_hint: {'center_y': .5, 'center_x': .5}
                size_hint: .8, .1
                background_color: 1, 0, 0, .8
                text: 'go to main screen'
                font_size: 25
                on_release: app.root.current = 'main'
            Button:
                pos_hint: {'center_y': .5, 'center_x': .5}
                size_hint: .8, .1
                background_color: 0, 1, 0, .8
                text: 'get random colour screen'
                font_size: 25
                on_release: app.root.new_colour_screen()
            Button:
                pos_hint: {'center_y': .5, 'center_x': .5}
                size_hint: .8, .1
                background_color: 0, 0, 1, .7
                text: 'About'
                font_size: 25
                #on_release: app.root.new_colour_screen()