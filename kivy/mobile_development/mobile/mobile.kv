#:kivy 2.0.0

#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition


# Root is the root widget (a child class from Screen Manager)
Root:
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    #transition: FadeTransition()
    OpeningScreen:
    MainScreen:
    SettingsScreen:
    AboutScreen:


<OpeningScreen>:
    name: 'opening'
    # Setting the screen as a FloatLayout allows to set each child widget in a relative position.
    FloatLayout
        # Create a text 'widget' to be rendered.
        Label:
            text: 'Super App!'
            font_size: 70
            color: 0, 0, 0, 1
            pos_hint: {'top': 1.25}
        Label:
            text: 'Daily tip!!!'
            font_size: 30
            color: 0, 0, 0, 1
            pos_hint: {'top': 1}
        Label:
            text: 'Tap anywhere to continue'
            color: 0, 0, 0, .5
            pos_hint: {'bottom': 2, 'top': .75}
        Button:
            # set the background transparent
            background_color: 0, 0, 0, 0
            # Set the button size same as screen so wherever the user tap or click set the on_press binding
            size_hint: root.size
            pos: root.pos
            # Tells the ScreenManager to change the current screen to 'main'
            on_release:
                root.manager.transition = NoTransition()
                app.root.current = 'main'



<Label>
    font_size: 25
    color: 0, 0, 0, 1


<PopUpContent>
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        pos_hint: {'top': 1, 'right': 1}
        #pos: 100, 100
        orientation: 'vertical'
        Label:
            text: "Coding is fun!"


<MainScreen>:
    name: 'main'
    #test_var: testing_var
    #test_var2: testing_var2

    FloatLayout:
        Label:
            #pos_hint: {'y': 0, 'x': .5}
            pos_hint: {'center_y': .9, 'center_x': .5}
            #pos_hint: {'top': 1, 'right': .5}

            text: 'Main Screen!'
            font_size: 40
            color: 0, 0, 0, 1
        Button:
            background_normal: 'icon.png'
            #background_down: 'down.png'
            border: 0,0,0,0
            # Make the background of the button invisible
            size_hint: None, None
            size: 100, 100
            pos_hint: {'center_x': .9, 'center_y': .9}
            # make the text visible
            color: 0, 0, 0, 1
            font_size: 30
            on_release:
                root.manager.transition = SlideTransition()
                app.root.current = 'settings'

        Button:
            size_hint: None, None
            size: 100, 100
            pos_hint: {'center_x': .8, 'center_y': .9}
            text: 'Keyboard'
            font_size: 20
            color: 0, 1, 1, 1
            background_color: .6, 0, 6, .6
            on_release: root.show_keyboard()

        # Table layout
        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, .75
            pos_hint: {'y': 0}
            canvas:
                Color:
                    rgba: .5, 0, 0, .0  # red rectangle...
                Rectangle:
                    size: self.size
                    pos: self.pos

            # Table title
            GridLayout:
                cols: 5
                size_hint: 1, None
                #pos_hint: {'center_y': 1}
                row_force_default: True
                row_default_height: root.height*.05
                height: self.minimum_height
                canvas:
                    Color:
                        rgba: 0, .5, 0, .5
                    Rectangle:
                        size: self.size
                        pos: self.pos
                # Column titles
                Label:
                    text: 'A'
                Label:
                    text: 'B'
                Label:
                    text: 'C'
                Label:
                    text: 'D'
                Label:
                    text: 'E'

            # Scrollable area
            FloatLayout:
                #size_hint: 1, .5
                #pos_hint: {'center_y': .0}

                ScrollView:
                    #size_hint: None, None
                    pos_hint: {'x': 0, 'y': 0}

                    # Columns of the table layout
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: .5
                        pos_hint: {'y': 1}
                        canvas:
                            Color:
                                rgba: 0, 0, .5, .33 # scrollable block from table
                            Rectangle:
                                size: self.size
                                pos: self.pos

                        # column 'A'
                        GridLayout:
                            cols: 1
                            #size_hint_x: root.x * .2
                            row_force_default: True
                            row_default_height: root.height * .05

                            TextInput:
                                text: 'text'
                                default_height: root.height * .05
                            TextInput:
                                text: 'text'
                                background_color: 0, 0, 0, 0
                            TextInput:
                                text: 'text'
                            TextInput:
                                text: 'text'
                            TextInput:
                                text: 'text'
                            TextInput:
                                text: 'text'

                        # column 'B'
                        GridLayout:
                            cols: 1
                            row_force_default: True
                            row_default_height: root.height * .05

                            Label:
                                text: 'num'
                                default_height: root.height * .05
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'

                        # column 'C'
                        GridLayout:
                            cols: 1
                            row_force_default: True
                            row_default_height: root.height * .05

                            Label:
                                text: 'num'
                                default_height: root.height * .05
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'

                        # column 'D'
                        GridLayout:
                            cols: 1
                            row_force_default: True
                            row_default_height: root.height * .05

                            Label:
                                text: 'num'
                                default_height: root.height * .05
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'

                        # column 'E'
                        GridLayout:
                            cols: 1
                            row_force_default: True
                            row_default_height: root.height * .05
                            height: self.minimum_height

                            Label:
                                text: 'num'
                                default_height: root.height * .05
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'
                            Label:
                                text: 'num'

            GridLayout:
                cols:5
                rows: 3
                id: container
                size_hint_y: None
                row_force_default: True
                row_default_height: root.height*.05
                height: self.minimum_height

            GridLayout:
                cols:3
                size_hint_y: None
                size_y: 100
                canvas:
                    Color:
                        rgba: 1, 0, .5, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos

                Button:
                    text: "Add"
                    #background_color: 1, 1, 1, .5
                Button:
                    text: 'Subtract'
                Button:
                    text: 'change'

<ColourScreen>:
    name: 'color'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'colour {:.2},{:.2},{:.2} screen'.format(*root.colour[:3])
            font_size: 40
            color: 0, 0, 0, 1
        Widget:
            canvas:
                Color:
                    rgba: root.colour
                Ellipse:
                    pos: self.pos
                    size: self.size
        BoxLayout:
            orientation: 'vertical'
            Button:
                text: 'go back to settings'
                font_size: 30
                on_release:
                    root.manager.transition = SlideTransition(direction="right")
                    app.root.current = 'settings'
            Button:
                id: btn
                text: 'get random colour screen' if btn.state == 'normal' else 'changed'
                font_size: 30
                background_color: [.5,0,.5,.5]
                on_release:
                    root.manager.transition = FadeTransition()
                    app.root.new_colour_screen()


<SettingsScreen>:
    name: 'settings'
    FloatLayout:
        Widget:
            # Set up the background as a full window red rectangle
            canvas:
                Color:
                    rgba: 1, 0, 0, 1
                Rectangle:
                    size: root.size
        Label:
            text: 'Settings'
            font_size: 40
            color: 0, 0, 0, 1
            pos_hint: {'top': 1.4}
        BoxLayout:
            # Set the background of the boxlayout for the button blue with opacity at 20%
            canvas:
                Color:
                    rgba: 1, 1, 1, .2
                Rectangle:
                    size: self.size
                    pos: self.pos
            orientation: 'vertical'
            padding: 15
            pos_hint: {'center_y': .5, 'center_x': .5}
            #pos: self.pos
            size_hint: .5, .3
            #size: self.size
            Button:
                pos_hint: {'center_y': .5, 'center_x': .5}
                size_hint: .8, .1
                background_color: 1, 0, 0, .8
                text: 'go to main screen'
                color: 1, 0, 0, 1
                font_size: 25
                on_release:
                    root.manager.transition.direction = "right"
                    app.root.current = 'main'
            Button:
                pos_hint: {'center_y': .5, 'center_x': .5}
                size_hint: .8, .1
                background_color: 0, 1, 0, .8
                text: 'get random colour screen'
                color: 0, 1, 0, 1
                font_size: 25
                on_release:
                    root.manager.transition.direction = "left"
                    app.root.new_colour_screen()
            Button:
                pos_hint: {'center_y': .5, 'center_x': .5}
                size_hint: .8, .1
                background_color: 0, 0, 1, .7
                text: 'About'
                color: 0, 0, 1, 1
                font_size: 25
                on_release:
                    root.manager.transition.direction = "left"
                    app.root.current = 'about'


<AboutScreen>
    name: 'about'
    FloatLayout:

        Label:
            size_hint: 1, .25
            text: 'About'
            font_size: 40
            pos_hint: {'center_x': .5, 'center_y': .85}

        Label:
            size_hint: 1, 1
            text: 'Blah blah blah blah blah blah blah blah blah\n' * 15
            font_size: 30
            pos_hint: {'center_x': .5, 'center_y': .5}

        Button:
            text: 'back'
            font_size: 50
            pos_hint: {'center_x': 0.5, 'center_y': .15}
            size_hint: .35, .10
            background_color: 1, .5, .25, .5

            on_release:
                root.manager.transition.direction = "right"
                app.root.current = 'settings'
