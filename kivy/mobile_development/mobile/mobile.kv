#:kivy 2.0.0

#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import FadeTransition kivy.uix.screenmanager.NoTransition

# Root is the root widget (a child class from Screen Manager)
Root:
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    transition: FadeTransition()
    OpeningScreen:
    MainScreen:
    SettingsScreen:


<OpeningScreen>:
    name: 'opening'
    # Setting the screen as a FloatLayout allows to set each child widget in a relative position.
    FloatLayout
        # Create a text 'widget' to be rendered.
        Label:
            text: 'Super App!'
            font_size: 70
            color: 0, 0, 0, 1
            pos_hint: {'top': 1.25}
        Label:
            text: 'Daily tip!!!'
            font_size: 20
            color: 0, 0, 0, 1
            pos_hint: {'top': 1}
        Label:
            text: 'Tap anywhere to continue'
            color: 0, 0, 0, .5
            pos_hint: {'bottom': 2}
            pos_hint: {'top': .75}
        Button:
            # set the background transparent
            background_color: 0, 0, 0, 0
            # Set the button size same as screen so wherever the user tap or click set the on_press binding
            size_hint: root.size
            pos: root.pos
            # Tells the ScreenManager to change the current screen to 'main'
            on_release: app.root.current = 'main'


<Label>
    font_size: 20
    color: 0, 0, 0, 1


<MainScreen>:
    name: 'main'
    test: test

    FloatLayout:
        Label:
            pos_hint: {'top': 1.40}
            text: 'Main Screen!'
            font_size: 30
            color: 0, 0, 0, 1
        Button:
            # Make the background of the button invisible
            background_color: 0, 0, 0, 0
            size_hint: None, None
            size: 25, 25
            pos_hint: {'top': .925, 'right': .925}
            text: ':'
            # make the text visible
            color: 0, 0, 0, 1
            font_size: 30
            on_release: app.root.current = 'settings'

        # Here is the table
        GridLayout:
            pos_hint: {'top': .75}
            size_hint: 1, .5
            cols: 3
            padding: 5
            spacing: 5
            canvas:
                Color:
                    rgba: 0, .5, 1, .5
                # Make a rectangle to render the canvas color
                Rectangle:
                    size: self.size
                    pos: self.pos
            TextInput:
                id: test
                multiline: False
                len: 8
                #test: True
            Label:
                text: 'slot2'
            Label:
                text: 'slot3'
            Label:
                text: 'slot4'
            Label:
                text: 'slot5'
            Label:
                text: 'slot6'
            Label:
                text: 'slot7'
            Label:
                text: app.test_var


<ColourScreen>:
    name: 'color'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'colour {:.2},{:.2},{:.2} screen'.format(*root.colour[:3])
            font_size: 30
            color: 0, 0, 0, 1
        Widget:
            canvas:
                Color:
                    rgba: root.colour
                Ellipse:
                    pos: self.pos
                    size: self.size
        BoxLayout:
            orientation: 'vertical'
            Button:
                text: 'go to main screen'
                font_size: 30
                on_release: app.root.current = 'main'
            Button:
                text: 'get random colour screen'
                font_size: 30
                on_release: app.root.new_colour_screen()


<SettingsScreen>:
    name: 'settings'
    FloatLayout:
        Widget:
            canvas:
                Color:
                    rgba: 1, 0, 0, 1
                Rectangle:
                    size: root.size
        FloatLayout:
            Label:
                text: 'Settings'
                font_size: 30
                color: 0, 0, 0, 1
                pos_hint: {'top': 1.4}
        BoxLayout:
            orientation: 'vertical'
            padding: 15
            pos_hint: {'top': .5}
            pos: self.width / 3, 1
            size_hint: 1, 1
            Button:
                size_hint: .6, .4
                pos_x: 1
                text: 'go to main screen'
                font_size: 25
                on_release: app.root.current = 'main'
            Button:
                size_hint: .60, .4
                text: 'get random colour screen'
                font_size: 25
                on_release: app.root.new_colour_screen()
            Button:
                size_hint: .6, .4
                text: 'About'
                font_size: 25
                #on_release: app.root.new_colour_screen()